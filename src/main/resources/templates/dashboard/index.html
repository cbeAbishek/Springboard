<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Springboard Test Dashboard</title>
    <link rel="stylesheet" href="/css/dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üöÄ</div>
                    <span>Springboard</span>
                </div>
                <nav class="nav">
                    <a href="/dashboard" class="nav-link active">Dashboard</a>
                    <a href="/dashboard/test-manager" class="nav-link">Test Manager</a>
                    <a href="/dashboard/reports" class="nav-link">Reports</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="fade-in">
                <h1 class="mb-3" style="font-size: 2rem; font-weight: 700;">Dashboard Overview</h1>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card success scale-in">
                        <div class="stat-icon">‚úì</div>
                        <div class="stat-value" id="totalTests">0</div>
                        <div class="stat-label">Total Tests</div>
                        <div class="stat-trend up">
                            <span>‚Üë 12%</span>
                            <span class="text-muted">from last week</span>
                        </div>
                    </div>

                    <div class="stat-card success scale-in" style="animation-delay: 0.1s;">
                        <div class="stat-icon">‚úì</div>
                        <div class="stat-value" id="passedTests">0</div>
                        <div class="stat-label">Passed Tests</div>
                        <div class="progress">
                            <div class="progress-bar success" id="passedProgress" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="stat-card danger scale-in" style="animation-delay: 0.2s;">
                        <div class="stat-icon">‚úó</div>
                        <div class="stat-value" id="failedTests">0</div>
                        <div class="stat-label">Failed Tests</div>
                        <div class="progress">
                            <div class="progress-bar danger" id="failedProgress" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="stat-card warning scale-in" style="animation-delay: 0.3s;">
                        <div class="stat-icon">‚äò</div>
                        <div class="stat-value" id="skippedTests">0</div>
                        <div class="stat-label">Skipped Tests</div>
                        <div class="progress">
                            <div class="progress-bar warning" id="skippedProgress" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="stat-card info scale-in" style="animation-delay: 0.4s;">
                        <div class="stat-icon">%</div>
                        <div class="stat-value" id="successRate">0%</div>
                        <div class="stat-label">Success Rate</div>
                        <div class="stat-trend up">
                            <span>‚Üë 5%</span>
                            <span class="text-muted">improvement</span>
                        </div>
                    </div>

                    <div class="stat-card info scale-in" style="animation-delay: 0.5s;">
                        <div class="stat-icon">‚è±</div>
                        <div class="stat-value" id="avgDuration">0s</div>
                        <div class="stat-label">Avg Duration</div>
                        <div class="stat-trend down">
                            <span>‚Üì 15%</span>
                            <span class="text-muted">faster</span>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="grid-2 mt-4">
                    <div class="card slide-in-left">
                        <div class="card-header">
                            <h2 class="card-title">Test Results Distribution</h2>
                            <select class="form-control" style="width: auto;" id="chartPeriod">
                                <option value="7">Last 7 days</option>
                                <option value="30">Last 30 days</option>
                                <option value="90">Last 90 days</option>
                            </select>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="resultsChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="card slide-in-right">
                        <div class="card-header">
                            <h2 class="card-title">Test Execution Trend</h2>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="trendChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Test Runs -->
                <div class="card mt-4 fade-in" style="animation-delay: 0.3s;">
                    <div class="card-header">
                        <h2 class="card-title">Recent Test Executions</h2>
                        <a href="/dashboard/reports" class="btn btn-primary">View All Reports</a>
                    </div>
                    <div class="card-body">
                        <div class="table-container">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Execution ID</th>
                                        <th>Suite</th>
                                        <th>Status</th>
                                        <th>Tests</th>
                                        <th>Pass Rate</th>
                                        <th>Duration</th>
                                        <th>Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="recentExecutions">
                                    <tr>
                                        <td colspan="8" class="text-center text-muted">
                                            <div class="spinner" style="margin: 2rem auto;"></div>
                                            Loading recent executions...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="grid-3 mt-4">
                    <div class="card scale-in">
                        <div class="card-body text-center">
                            <div class="stat-icon" style="margin: 0 auto 1rem;">‚ñ∂</div>
                            <h3 class="card-title mb-2">Run Tests</h3>
                            <p class="text-muted mb-3">Execute your test suite</p>
                            <a href="/dashboard/test-manager" class="btn btn-primary">Go to Test Manager</a>
                        </div>
                    </div>

                    <div class="card scale-in" style="animation-delay: 0.1s;">
                        <div class="card-body text-center">
                            <div class="stat-icon" style="margin: 0 auto 1rem; background: linear-gradient(135deg, var(--info-color), #2563eb);">üìä</div>
                            <h3 class="card-title mb-2">View Reports</h3>
                            <p class="text-muted mb-3">Analyze test results</p>
                            <a href="/dashboard/reports" class="btn btn-info">Browse Reports</a>
                        </div>
                    </div>

                    <div class="card scale-in" style="animation-delay: 0.2s;">
                        <div class="card-body text-center">
                            <div class="stat-icon" style="margin: 0 auto 1rem; background: linear-gradient(135deg, var(--success-color), #059669);">üìã</div>
                            <h3 class="card-title mb-2">Test Coverage</h3>
                            <p class="text-muted mb-3">Check code coverage</p>
                            <button class="btn btn-success" onclick="showCoverageModal()">View Coverage</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Coverage Modal -->
    <div class="modal" id="coverageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Test Coverage Report</h3>
                <button class="modal-close" onclick="closeCoverageModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="alert alert-info">
                    <span>üìä</span>
                    <span>Coverage data will be available after test execution</span>
                </div>
                <div class="mt-3">
                    <div class="d-flex justify-content-between mb-1">
                        <span>Overall Coverage</span>
                        <span class="text-bold">75%</span>
                    </div>
                    <div class="progress">
                        <div class="progress-bar success" style="width: 75%"></div>
                    </div>
                </div>
                <div class="mt-3">
                    <div class="d-flex justify-content-between mb-1">
                        <span>API Tests</span>
                        <span class="text-bold">82%</span>
                    </div>
                    <div class="progress">
                        <div class="progress-bar success" style="width: 82%"></div>
                    </div>
                </div>
                <div class="mt-3">
                    <div class="d-flex justify-content-between mb-1">
                        <span>UI Tests</span>
                        <span class="text-bold">68%</span>
                    </div>
                    <div class="progress">
                        <div class="progress-bar warning" style="width: 68%"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCoverageModal()">Close</button>
                <button class="btn btn-primary">Generate Full Report</button>
            </div>
        </div>
    </div>

    <script src="/js/dashboard.js"></script>
</body>
</html>

